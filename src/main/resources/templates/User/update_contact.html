<!DOCTYPE html>
<html lang="en" th:replace="~{base :: parent(~{::#content}, ~{::title}, ~{::script})}">
<head>
  <title>Update Contact</title>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="content">

  <!-- Sidebar -->
  <div th:if="${LoggedUser}">
    <div th:replace="~{user/sidebar :: sidebar}"></div>
  </div>

  <div class="ml-64 p-8">
    <div class="max-w-3xl mx-auto bg-gray-300 dark:bg-gray-800 rounded-xl shadow-lg p-8">

    

      <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 text-center">Update Contact</h1>

      <form th:action="@{'/user/contacts/update/' + ${contactForm.id}}" method="post" 
            th:object="${contactForm}" enctype="multipart/form-data">

        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-800 dark:text-gray-300">Full Name</label>
            <input th:field="*{name}" type="text"
                   class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                   placeholder="Enter full name" required>
          </div>

          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
            <input th:field="*{email}" type="email"
                   class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                   placeholder="Enter email" required>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">Phone Number</label>
            <input th:field="*{phoneNumber}" type="tel"
                   class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                   placeholder="e.g., 9876543210" required>
          </div>

          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">Address</label>
            <input th:field="*{address}" type="text"
                   class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                   placeholder="City, State, Country" required>
          </div>
        </div>

        <div class="mb-6">
          <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">About</label>
          <textarea th:field="*{about}" rows="4"
                    class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                    placeholder="Write something about this contact..." required></textarea>
        </div>

        <!-- <div class="mb-6">
          <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Contact Img</label>
          <input th:field="*{picture}" type="file" id="image_file_input" class="block w-full text-lg text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400">
            <p class="text-red-500" th:if="${#fields.hasErrors('picture')}" th:errors="*{picture}">Invalid File</p>

          <img src="" alt="" id="upload_image_preview" class="max-h-20 mx-auto rounded-lg shadow m-2">
        </div> -->

   <!-- Image Upload Input and Preview -->
<div class="mb-6">
  <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
    Contact Image
  </label>

  <input
    th:field="*{picture}"
    type="file"
    id="image_file_input"
    accept="image/*"
    onchange="previewImage(event)"
    class="block w-full text-lg text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"
  />

  <!-- Validation error -->
  <p class="text-red-500 text-sm mt-1" th:if="${#fields.hasErrors('picture')}" th:errors="*{picture}">
    Invalid File
  </p>

  <!-- Preview of newly selected image -->
  <img
    src=""
    alt="Image Preview"
    id="upload_image_preview"
    class="hidden max-h-20 mx-auto rounded-lg shadow m-2"
  />
</div>

        <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-3">Social Links (Optional)</h2>
        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div class="relative">
            <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">LinkedIn</label>
            <div class="flex items-center">
              <i class="fab fa-linkedin text-blue-700 text-lg mr-3"></i>
              <input th:field="*{linkedInLink}" type="url"
                     class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                     placeholder="https://linkedin.com/in/username">
            </div>
          </div>

          <div class="relative">
            <label class="block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">GitHub</label>
            <div class="flex items-center">
              <i class="fab fa-github text-gray-800 dark:text-white text-lg mr-3"></i>
              <input th:field="*{webSiteLink}" type="url"
                     class="w-full px-4 py-2 border rounded-md text-white dark:bg-gray-700 dark:text-white"
                     placeholder="https://github.com/username">
            </div>
          </div>
        </div>

        <div class="flex items-center mb-4">
          <input th:field="*{favorite}" id="terms" type="checkbox"
                 class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600">
          <label for="terms" class="ml-2 text-sm text-gray-700 dark:text-gray-300">This is your favorite contact</label>
        </div>

        <button type="submit"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md transition duration-300">
          Save Changes
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Scripts -->
 <script>
  // document.querySelector("#image_file_input")
  //   .addEventListener("change", function (event) {
  //     let file = event.target.files[0];
  //     let reader = new FileReader();
  //     reader.onload = function () {
  //       document.querySelector("#upload_image_preview")
  //         .setAttribute("src", reader.result);
  //     };
  //     if (file) reader.readAsDataURL(file);
  //   });

  // setTimeout(() => {
  //   const alertBox = document.getElementById('flash-message');
  //   if (alertBox) {
  //     alertBox.style.display = 'none';
  //   }
  // }, 5000);


     function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById("upload_image_preview");

    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.classList.remove("hidden");
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
</body>
</html>







